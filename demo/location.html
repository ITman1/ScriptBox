<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>JavaScript Engine Demos - Location interface</title>
<style media='all' type='text/css'>
@import "style.css";
</style>
</head>
<body>
    <script type="text/javascript" src="global.js"></script>
    <div id="header">
        <div>
            <a href="javascript:go_back()">back</a> | <a
                href="javascript:go_forward()">forward</a>
        </div>
        <h1 id="location-interface">
            JavaScript Engine Demos<span>Location interface</span>
        </h1>
    </div>
    <div id="content">
        <script type="text/javascript">
            function page_reload() {
            	console.info("started loading of location.html");
            	location.reload();
            }
            
            function page_assign() {
                var page = prompt("Type in url where to navigate, e.g. index.html.", "index.html");
                location.assign(page);
            }
            
            function page_replace() {
                var page = prompt("Type in url where to navigate, e.g. index.html.", "index.html");
                location.replace(page);
            }
            
            function urlutils_test() {
                var url = prompt("Type in new url to be constructed or left empty for printing the current location.");
                
                if (url.length == 0) {
                	url = location;
                } else {
                	url = new URL(url);
                }
                
                for (var attr in url) {
                	console.info(attr + " -> " + url[attr]);
                }
            }
            
            onload = function () {
            	console.info("completed loading of location.html");
            }
        </script>
        <p>Global <a href="http://www.w3.org/html/wg/drafts/html/master/browsers.html#window">Window</a> object
        contains property <a href="http://www.w3.org/html/wg/drafts/html/master/browsers.html#dom-location">location</a> that should implement the 
        <a href="http://www.w3.org/html/wg/drafts/html/master/browsers.html#location">Location</a> interface.
        This interface is fully supported, including its super interface <a href="http://url.spec.whatwg.org/#urlutils">URLUtils</a> 
        except the origin and searchParams attributes. URL interface, implementing also the <a href="http://url.spec.whatwg.org/#urlutils">URLUtils</a>, has been implemented.
        </p>
        
        <p>Navigation is accomplished to the <a href="http://www.w3.org/html/wg/drafts/html/master/browsers.html#navigate">navigation</a>
         algorithm according to the specification. At this moment the following schemas: "http", "file", 
         "javascript" and "https" are supported. Even if we can handle only text/html content type now, general mechanism for handling such contents as: plain text, multipart, media, plugin, XML, etc. has been also implemented
          
         </p>
        
        <h3>Location interface</h3>
        <div class="code">
            <span>void assign(DOMString url);</span>
		    <span>void replace(DOMString url);</span>
		    <span>void reload();</span>
        </div>
        <h3>URLUtils interface</h3>
        <div class="code">
            <span>DOMString href;</span>
            <span>DOMString origin;</span>
            <span>DOMString protocol;</span>
            <span>DOMString username;</span>
            <span>DOMString password;</span>
            <span>DOMString host;</span>
            <span>DOMString hostname;</span>
            <span>DOMString port;</span>
            <span>DOMString pathname;</span>
            <span>DOMString search;</span>
            <span>URLSearchParams searchParams;</span>
            <span>DOMString hash;</span>
        </div>
        <h3>URL interface</h3>
        <div class="code">
            <span>URL(DOMString url, optional DOMString base = "about:blank");</span>
        </div>
        <h2>Location interface tests</h2>
        <p>
            Test reload() by clicking on <a href="javascript:page_reload()">this</a>. For navigating inside 
            this browsing context and testing assign() click on <a href="javascript:page_assign()">this</a>,
            then traverse the history back and you should get on this page. Finally try replace() 
            by clicking on <a href="javascript:page_replace()">this</a> that causes removing the current
            entry from the session history.
        </p>
        <p>
            For testing the URLUtils and URL interface click on <a href="javascript:urlutils_test()">this</a>. 
            The corresponding URL's attributes will be printed into the console.
        </p>
        <p>
            For testing the fragment navigation click on <a href="#location-interface">this</a>
            and you should be navigated to the page title. To test new navigation with the bookmarklet
            click on <a href="javascript:'Bookmarklet content'">this</a> or simply write custom 
            JavaScript code into navigation panel with the 'javascript:' scheme.
        </p>
        
        <h2>Navigating other browsing contexts</h2>
        <p>There is also support for the navigation that causes creation of the new browsing context.
        To open new blank auxiliary browsing context click <a href="index.html" target="_blank">here</a>.
        If you wish to explore the &lt;IFRAME&gt; nested browsing contexts, go to <a href="benchmark/sunspider.html">benchmark page</a>
        and see the source code of that page.</p>
    </div>
    <div id="footer">
        <p>
            Author: Radim Loskot | Contact (Gmail): radim.loskot | Project pages:
            <a href="https://github.com/ITman1/ScriptBox">ScriptBox</a>
        </p>
    </div>
</body>
</html>